# Use a full Node image that has all the tools needed
FROM node:18

WORKDIR /usr/src/app

# Copy package files and TypeScript config
COPY package*.json ./
COPY tsconfig.json ./

# Install all dependencies, including devDependencies
RUN npm install

# Copy source code
COPY src/ ./src/

# Copy environment file
COPY .env ./

# This command will be run when the container starts
# It uses nodemon to watch the src directory
CMD ["npm", "run", "dev"]
